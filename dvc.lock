schema: '2.0'
stages:
  prepare_data:
    cmd: python ./src/prepare_data.py
    deps:
    - path: ./archive/imdb_dataset.csv
      hash: md5
      md5: 308443a50e5c993e7b8a1cdb95750026
      size: 66212309
    - path: ./src/prepare_data.py
      hash: md5
      md5: 1e7358fffce624416728dc74af245e96
      size: 696
    params:
      params.yaml:
        data:
          csv_file_path: ./archive/imdb_dataset.csv
          test_set_ratio: 0.3
          train_csv_save_path: ./archive/train.csv
          test_csv_save_path: ./archive/test.csv
    outs:
    - path: ./archive/test.csv
      hash: md5
      md5: 51d90af1d8323666d161de0cec433cf9
      size: 19833030
    - path: ./archive/train.csv
      hash: md5
      md5: cfa7da197088f8a5ffcc273a5e104874
      size: 46479308
  make_features:
    cmd: python ./src/make_features.py
    deps:
    - path: ./archive/test.csv
      hash: md5
      md5: 51d90af1d8323666d161de0cec433cf9
      size: 19833030
    - path: ./archive/train.csv
      hash: md5
      md5: cfa7da197088f8a5ffcc273a5e104874
      size: 46479308
    - path: ./src/make_features.py
      hash: md5
      md5: 48f310fba4db44ef7703322afe067cf6
      size: 1629
    params:
      params.yaml:
        features:
          vectorizer: tfidf-vectorizer
          train_features_save_path: ./archive/train.joblib
          test_features_save_path: ./archive/test.joblib
    outs:
    - path: ./archive/test.joblib
      hash: md5
      md5: ff7e4550be7b020ec2a3ce018e50a897
      size: 15817251
    - path: ./archive/train.joblib
      hash: md5
      md5: 0c281fd10146ab9e8e9f2a6b51b5d543
      size: 37416227
  train:
    cmd: python ./src/train.py
    deps:
    - path: ./archive/train.csv
      hash: md5
      md5: cfa7da197088f8a5ffcc273a5e104874
      size: 46479308
    - path: ./archive/train.joblib
      hash: md5
      md5: 0c281fd10146ab9e8e9f2a6b51b5d543
      size: 37416227
    - path: ./src/train.py
      hash: md5
      md5: 1ae30234c87e7997e5191eeed7e7b387
      size: 678
    params:
      params.yaml:
        train:
          penalty: l2
          C: 1.0
          solver: lbfgs
          model_save_path: ./archive/model.joblib
    outs:
    - path: ./archive/model.joblib
      hash: md5
      md5: e9afe0d45f53bdccd6a2ca2121d8850b
      size: 704335
  evaluate:
    cmd: python ./src/evaluate.py
    deps:
    - path: ./archive/model.joblib
      hash: md5
      md5: e9afe0d45f53bdccd6a2ca2121d8850b
      size: 704335
    - path: ./archive/test.csv
      hash: md5
      md5: 51d90af1d8323666d161de0cec433cf9
      size: 19833030
    - path: ./archive/test.joblib
      hash: md5
      md5: ff7e4550be7b020ec2a3ce018e50a897
      size: 15817251
    - path: ./src/evaluate.py
      hash: md5
      md5: b533af3b41c2a9e9f55eabff6c6ef97b
      size: 895
    params:
      params.yaml:
        evaluate:
          metric: f1
          results_save_path: ./archive/results.yaml
    outs:
    - path: ./archive/results.yaml
      hash: md5
      md5: 47f374ac1386df5974a55983d6da6596
      size: 23
